<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.104.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Discoverable Partitions Specification (DPS) # TL;DR: Let&rsquo;s automatically discover, mount and enable the root partition, /home/, /srv/, /var/ and /var/tmp/ and the swap partitions based on GUID Partition Tables (GPT)!
This specification describes the use of GUID Partition Table (GPT) UUIDs to enable automatic discovery of partitions and their intended mountpoints. Traditionally Linux has made little use of partition types, mostly just defining one UUID for file system/data partitions and another one for swap partitions."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Discoverable Partitions Specification"><meta property="og:description" content="The Discoverable Partitions Specification (DPS) # TL;DR: Let&rsquo;s automatically discover, mount and enable the root partition, /home/, /srv/, /var/ and /var/tmp/ and the swap partitions based on GUID Partition Tables (GPT)!
This specification describes the use of GUID Partition Table (GPT) UUIDs to enable automatic discovery of partitions and their intended mountpoints. Traditionally Linux has made little use of partition types, mostly just defining one UUID for file system/data partitions and another one for swap partitions."><meta property="og:type" content="article"><meta property="og:url" content="https://uapi-group.org/specifications/specs/discoverable_partitions_specification/"><meta property="article:section" content="specs"><title>Discoverable Partitions Specification | UAPI Group Specifications</title><link rel=manifest href=/specifications/manifest.json><link rel=icon href=/specifications/favicon.png type=image/x-icon><link rel=stylesheet href=/specifications/book.min.f716a89e40b01f033146ee402497165ac5bcf8935948094dceafbcb19f6f3c8d.css integrity="sha256-9xaonkCwHwMxRu5AJJcWWsW8+JNZSAlNzq+8sZ9vPI0="><script defer src=/specifications/en.search.min.42c401a92a587a9daceefa2193355a170a7635432cdd6d85a8501cda1a6c7dd3.js integrity="sha256-QsQBqSpYep2s7vohkzVaFwp2NUMs3W2FqFAc2hpsfdM="></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/specifications><span>UAPI Group Specifications</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://uapi-group.org/>⬅️ Back to top</a></li><li>⸻</li></ul><ul><li><span>Specs</span><ul><li><a href=https://uapi-group.org/specifications/specs/base_directory_specification/>Base Directory Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/boot_loader_specification/>Boot Loader Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/discoverable_disk_image/>Discoverable Disk Image</a></li><li><a href=https://uapi-group.org/specifications/specs/discoverable_partitions_specification/ class=active>Discoverable Partitions Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/linux_tpm_pcr_registry/>Linux TPM PCR Registry</a></li><li><a href=https://uapi-group.org/specifications/specs/sysext/>Sysext - System Extension</a></li><li><a href=https://uapi-group.org/specifications/specs/unified_kernel_image/>Unified Kernel Image</a></li><li><a href=https://uapi-group.org/specifications/specs/version_format_specification/>Version Format Specification</a></li></ul></li></ul><ul><li>⸻</li><li><a href=https://github.com/uapi-group/specifications target=_blank rel=noopener>Collaborate on Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/specifications/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Discoverable Partitions Specification</strong>
<label for=toc-control><img src=/specifications/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#defined-partition-type-uuids>Defined Partition Type UUIDs</a></li><li><a href=#partition-names>Partition Names</a></li><li><a href=#partition-attribute-flags>Partition Attribute Flags</a></li><li><a href=#verity>Verity</a></li><li><a href=#suggested-mode-of-operation>Suggested Mode of Operation</a></li><li><a href=#sharing-of-file-systems-between-installations>Sharing of File Systems between Installations</a></li><li><a href=#frequently-asked-questions>Frequently Asked Questions</a><ul><li><a href=#why-are-you-taking-my-etcfstab-away>Why are you taking my <code>/etc/fstab</code> away?</a></li><li><a href=#why-did-you-only-define-the-root-partition-for-these-listed-architectures>Why did you only define the root partition for these listed architectures?</a></li><li><a href=#why-define-distinct-root-partition-uuids-for-the-various-architectures>Why define distinct root partition UUIDs for the various architectures?</a></li><li><a href=#doesnt-this-break-multi-boot-scenarios>Doesn&rsquo;t this break multi-boot scenarios?</a></li><li><a href=#what-partitioning-tools-will-create-a-dps-compliant-partition-table>What partitioning tools will create a DPS-compliant partition table?</a></li></ul></li><li><a href=#links>Links</a></li></ul></nav></aside></header><article class=markdown><h1 id=the-discoverable-partitions-specification-dps>The Discoverable Partitions Specification (DPS)
<a class=anchor href=#the-discoverable-partitions-specification-dps>#</a></h1><p><em>TL;DR: Let&rsquo;s automatically discover, mount and enable the root partition,
<code>/home/</code>, <code>/srv/</code>, <code>/var/</code> and <code>/var/tmp/</code> and the swap partitions based on
GUID Partition Tables (GPT)!</em></p><p>This specification describes the use of GUID Partition Table (GPT) UUIDs to
enable automatic discovery of partitions and their intended mountpoints.
Traditionally Linux has made little use of partition types, mostly just
defining one UUID for file system/data partitions and another one for swap
partitions. With this specification, we introduce additional partition types
for specific uses. This has many benefits:</p><ul><li>OS installers can automatically discover and make sense of partitions of
existing Linux installations.</li><li>The OS can discover and mount the necessary file systems with a non-existent
or incomplete <code>/etc/fstab</code> file and without the <code>root=</code> kernel command line
option.</li><li>Container managers (such as nspawn and libvirt-lxc) can introspect and set up
file systems contained in GPT disk images automatically and mount them to the
right places, thus allowing booting the same, identical images on bare metal
and in Linux containers. This enables true, natural portability of disk
images between physical machines and Linux containers.</li><li>As a help to administrators and users partition manager tools can show more
descriptive information about partitions tables.</li></ul><p>Note that the OS side of this specification is currently implemented in
<a href=https://systemd.io/>systemd</a> 211 and newer in the
<a href=https://www.freedesktop.org/software/systemd/man/systemd-gpt-auto-generator.html>systemd-gpt-auto-generator(8)</a>
generator tool. Note that automatic discovery of the root only works if the
boot loader communicates this information to the OS, by implementing the
<a href=https://systemd.io/BOOT_LOADER_INTERFACE>Boot Loader Interface</a>.</p><h2 id=defined-partition-type-uuids>Defined Partition Type UUIDs
<a class=anchor href=#defined-partition-type-uuids>#</a></h2><table><thead><tr><th>Name</th><th>Partition Type UUID</th><th>Allowed File Systems</th><th>Explanation</th></tr></thead><tbody><tr><td><em>Root Partition (Alpha)</em></td><td><code>6523f8ae-3eb1-4e2a-a05a-18b695ae656f</code> <code>SD_GPT_ROOT_ALPHA</code></td><td>Any native, optionally in LUKS</td><td>On systems with matching architecture, the first partition with this type UUID on the disk containing the active EFI ESP is automatically mounted to the root directory <code>/</code>. If the partition is encrypted with LUKS or has dm-verity integrity data (see below), the device mapper file will be named <code>/dev/mapper/root</code>.</td></tr><tr><td><em>Root Partition (ARC)</em></td><td><code>d27f46ed-2919-4cb8-bd25-9531f3c16534</code> <code>SD_GPT_ROOT_ARC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (32-bit ARM)</em></td><td><code>69dad710-2ce4-4e3c-b16c-21a1d49abed3</code> <code>SD_GPT_ROOT_ARM</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (64-bit ARM/AArch64)</em></td><td><code>b921b045-1df0-41c3-af44-4c6f280d3fae</code> <code>SD_GPT_ROOT_ARM64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (Itanium/IA-64)</em></td><td><code>993d8d3d-f80e-4225-855a-9daf8ed7ea97</code> <code>SD_GPT_ROOT_IA64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (LoongArch 64-bit)</em></td><td><code>77055800-792c-4f94-b39a-98c91b762bb6</code> <code>SD_GPT_ROOT_LOONGARCH64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>37c58c8a-d913-4156-a25f-48b1b64e07f0</code> <code>SD_GPT_ROOT_MIPS_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>700bda43-7a34-4507-b179-eeb93d7a7ca3</code> <code>SD_GPT_ROOT_MIPS64_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (HPPA/PARISC)</em></td><td><code>1aacdb3b-5444-4138-bd9e-e5c2239b2346</code> <code>SD_GPT_ROOT_PARISC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (32-bit PowerPC)</em></td><td><code>1de3f1ef-fa98-47b5-8dcd-4a860a654d78</code> <code>SD_GPT_ROOT_PPC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (64-bit PowerPC BigEndian)</em></td><td><code>912ade1d-a839-4913-8964-a10eee08fbd2</code> <code>SD_GPT_ROOT_PPC64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (64-bit PowerPC LittleEndian)</em></td><td><code>c31c45e6-3f39-412e-80fb-4809c4980599</code> <code>SD_GPT_ROOT_PPC64_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (RISC-V 32-bit)</em></td><td><code>60d5a7fe-8e7d-435c-b714-3dd8162144e1</code> <code>SD_GPT_ROOT_RISCV32</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (RISC-V 64-bit)</em></td><td><code>72ec70a6-cf74-40e6-bd49-4bda08e8f224</code> <code>SD_GPT_ROOT_RISCV64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (s390)</em></td><td><code>08a7acea-624c-4a20-91e8-6e0fa67d23f9</code> <code>SD_GPT_ROOT_S390</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (s390x)</em></td><td><code>5eead9a9-fe09-4a1e-a1d7-520d00531306</code> <code>SD_GPT_ROOT_S390X</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (TILE-Gx)</em></td><td><code>c50cdd70-3862-4cc3-90e1-809a8c93ee2c</code> <code>SD_GPT_ROOT_TILEGX</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (x86)</em></td><td><code>44479540-f297-41b2-9af7-d131d5f0458a</code> <code>SD_GPT_ROOT_X86</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Partition (amd64/x86_64)</em></td><td><code>4f68bce3-e8cd-4db1-96e7-fbcaf984b709</code> <code>SD_GPT_ROOT_X86_64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (Alpha)</em></td><td><code>e18cf08c-33ec-4c0d-8246-c6c6fb3da024</code> <code>SD_GPT_USR_ALPHA</code></td><td>Any native, optionally in LUKS</td><td>Similar semantics to root partition, but just the <code>/usr/</code> partition.</td></tr><tr><td><em><code>/usr/</code> Partition (ARC)</em></td><td><code>7978a683-6316-4922-bbee-38bff5a2fecc</code> <code>SD_GPT_USR_ARC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (32-bit ARM)</em></td><td><code>7d0359a3-02b3-4f0a-865c-654403e70625</code> <code>SD_GPT_USR_ARM</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (64-bit ARM/AArch64)</em></td><td><code>b0e01050-ee5f-4390-949a-9101b17104e9</code> <code>SD_GPT_USR_ARM64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (Itanium/IA-64)</em></td><td><code>4301d2a6-4e3b-4b2a-bb94-9e0b2c4225ea</code> <code>SD_GPT_USR_IA64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (LoongArch 64-bit)</em></td><td><code>e611c702-575c-4cbe-9a46-434fa0bf7e3f</code> <code>SD_GPT_USR_LOONGARCH64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>0f4868e9-9952-4706-979f-3ed3a473e947</code> <code>SD_GPT_USR_MIPS_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>c97c1f32-ba06-40b4-9f22-236061b08aa8</code> <code>SD_GPT_USR_MIPS64_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (HPPA/PARISC)</em></td><td><code>dc4a4480-6917-4262-a4ec-db9384949f25</code> <code>SD_GPT_USR_PARISC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (32-bit PowerPC)</em></td><td><code>7d14fec5-cc71-415d-9d6c-06bf0b3c3eaf</code> <code>SD_GPT_USR_PPC</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (64-bit PowerPC BigEndian)</em></td><td><code>2c9739e2-f068-46b3-9fd0-01c5a9afbcca</code> <code>SD_GPT_USR_PPC64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (64-bit PowerPC LittleEndian)</em></td><td><code>15bb03af-77e7-4d4a-b12b-c0d084f7491c</code> <code>SD_GPT_USR_PPC64_LE</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (RISC-V 32-bit)</em></td><td><code>b933fb22-5c3f-4f91-af90-e2bb0fa50702</code> <code>SD_GPT_USR_RISCV32</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (RISC-V 64-bit)</em></td><td><code>beaec34b-8442-439b-a40b-984381ed097d</code> <code>SD_GPT_USR_RISCV64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (s390)</em></td><td><code>cd0f869b-d0fb-4ca0-b141-9ea87cc78d66</code> <code>SD_GPT_USR_S390</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (s390x)</em></td><td><code>8a4f5770-50aa-4ed3-874a-99b710db6fea</code> <code>SD_GPT_USR_S390X</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (TILE-Gx)</em></td><td><code>55497029-c7c1-44cc-aa39-815ed1558630</code> <code>SD_GPT_USR_TILEGX</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (x86)</em></td><td><code>75250d76-8cc6-458e-bd66-bd47cc81a812</code> <code>SD_GPT_USR_X86</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Partition (amd64/x86_64)</em></td><td><code>8484680c-9521-48c6-9c11-b0720656f69e</code> <code>SD_GPT_USR_X86_64</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (Alpha)</em></td><td><code>fc56d9e9-e6e5-4c06-be32-e74407ce09a5</code> <code>SD_GPT_ROOT_ALPHA_VERITY</code></td><td>A dm-verity superblock followed by hash data</td><td>Contains dm-verity integrity hash data for the matching root partition. If this feature is used the partition UUID of the root partition should be the first 128 bits of the root hash of the dm-verity hash data, and the partition UUID of this dm-verity partition should be the final 128 bits of it, so that the root partition and its Verity partition can be discovered easily, simply by specifying the root hash.</td></tr><tr><td><em>Root Verity Partition (ARC)</em></td><td><code>24b2d975-0f97-4521-afa1-cd531e421b8d</code> <code>SD_GPT_ROOT_ARC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (32-bit ARM)</em></td><td><code>7386cdf2-203c-47a9-a498-f2ecce45a2d6</code> <code>SD_GPT_ROOT_ARM_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (64-bit ARM/AArch64)</em></td><td><code>df3300ce-d69f-4c92-978c-9bfb0f38d820</code> <code>SD_GPT_ROOT_ARM64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (Itanium/IA-64)</em></td><td><code>86ed10d5-b607-45bb-8957-d350f23d0571</code> <code>SD_GPT_ROOT_IA64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (LoongArch 64-bit)</em></td><td><code>f3393b22-e9af-4613-a948-9d3bfbd0c535</code> <code>SD_GPT_ROOT_LOONGARCH64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>d7d150d2-2a04-4a33-8f12-16651205ff7b</code> <code>SD_GPT_ROOT_MIPS_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>16b417f8-3e06-4f57-8dd2-9b5232f41aa6</code> <code>SD_GPT_ROOT_MIPS64_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (HPPA/PARISC)</em></td><td><code>d212a430-fbc5-49f9-a983-a7feef2b8d0e</code> <code>SD_GPT_ROOT_PARISC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (64-bit PowerPC LittleEndian)</em></td><td><code>906bd944-4589-4aae-a4e4-dd983917446a</code> <code>SD_GPT_ROOT_PPC64_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (64-bit PowerPC BigEndian)</em></td><td><code>9225a9a3-3c19-4d89-b4f6-eeff88f17631</code> <code>SD_GPT_ROOT_PPC64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (32-bit PowerPC)</em></td><td><code>98cfe649-1588-46dc-b2f0-add147424925</code> <code>SD_GPT_ROOT_PPC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (RISC-V 32-bit)</em></td><td><code>ae0253be-1167-4007-ac68-43926c14c5de</code> <code>SD_GPT_ROOT_RISCV32_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (RISC-V 64-bit)</em></td><td><code>b6ed5582-440b-4209-b8da-5ff7c419ea3d</code> <code>SD_GPT_ROOT_RISCV64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (s390)</em></td><td><code>7ac63b47-b25c-463b-8df8-b4a94e6c90e1</code> <code>SD_GPT_ROOT_S390_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (s390x)</em></td><td><code>b325bfbe-c7be-4ab8-8357-139e652d2f6b</code> <code>SD_GPT_ROOT_S390X_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (TILE-Gx)</em></td><td><code>966061ec-28e4-4b2e-b4a5-1f0a825a1d84</code> <code>SD_GPT_ROOT_TILEGX_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (amd64/x86_64)</em></td><td><code>2c7357ed-ebd2-46d9-aec1-23d437ec2bf5</code> <code>SD_GPT_ROOT_X86_64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Partition (x86)</em></td><td><code>d13c5d3b-b5d1-422a-b29f-9454fdc89d76</code> <code>SD_GPT_ROOT_X86_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (Alpha)</em></td><td><code>8cce0d25-c0d0-4a44-bd87-46331bf1df67</code> <code>SD_GPT_USR_ALPHA_VERITY</code></td><td>A dm-verity superblock followed by hash data</td><td>Similar semantics to root Verity partition, but just for the <code>/usr/</code> partition.</td></tr><tr><td><em><code>/usr/</code> Verity Partition (ARC)</em></td><td><code>fca0598c-d880-4591-8c16-4eda05c7347c</code> <code>SD_GPT_USR_ARC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (32-bit ARM)</em></td><td><code>c215d751-7bcd-4649-be90-6627490a4c05</code> <code>SD_GPT_USR_ARM_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (64-bit ARM/AArch64)</em></td><td><code>6e11a4e7-fbca-4ded-b9e9-e1a512bb664e</code> <code>SD_GPT_USR_ARM64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (Itanium/IA-64)</em></td><td><code>6a491e03-3be7-4545-8e38-83320e0ea880</code> <code>SD_GPT_USR_IA64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (LoongArch 64-bit)</em></td><td><code>f46b2c26-59ae-48f0-9106-c50ed47f673d</code> <code>SD_GPT_USR_LOONGARCH64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>46b98d8d-b55c-4e8f-aab3-37fca7f80752</code> <code>SD_GPT_USR_MIPS_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>3c3d61fe-b5f3-414d-bb71-8739a694a4ef</code> <code>SD_GPT_USR_MIPS64_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (HPPA/PARISC)</em></td><td><code>5843d618-ec37-48d7-9f12-cea8e08768b2</code> <code>SD_GPT_USR_PARISC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (64-bit PowerPC LittleEndian)</em></td><td><code>ee2b9983-21e8-4153-86d9-b6901a54d1ce</code> <code>SD_GPT_USR_PPC64_LE_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (64-bit PowerPC BigEndian)</em></td><td><code>bdb528a5-a259-475f-a87d-da53fa736a07</code> <code>SD_GPT_USR_PPC64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (32-bit PowerPC)</em></td><td><code>df765d00-270e-49e5-bc75-f47bb2118b09</code> <code>SD_GPT_USR_PPC_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (RISC-V 32-bit)</em></td><td><code>cb1ee4e3-8cd0-4136-a0a4-aa61a32e8730</code> <code>SD_GPT_USR_RISCV32_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (RISC-V 64-bit)</em></td><td><code>8f1056be-9b05-47c4-81d6-be53128e5b54</code> <code>SD_GPT_USR_RISCV64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (s390)</em></td><td><code>b663c618-e7bc-4d6d-90aa-11b756bb1797</code> <code>SD_GPT_USR_S390_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (s390x)</em></td><td><code>31741cc4-1a2a-4111-a581-e00b447d2d06</code> <code>SD_GPT_USR_S390X_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (TILE-Gx)</em></td><td><code>2fb4bf56-07fa-42da-8132-6b139f2026ae</code> <code>SD_GPT_USR_TILEGX_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (amd64/x86_64)</em></td><td><code>77ff5f63-e7b6-4633-acf4-1565b864c0e6</code> <code>SD_GPT_USR_X86_64_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Partition (x86)</em></td><td><code>8f461b0d-14ee-4e81-9aa9-049b6fb97abd</code> <code>SD_GPT_USR_X86_VERITY</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (Alpha)</em></td><td><code>d46495b7-a053-414f-80f7-700c99921ef8</code> <code>SD_GPT_ROOT_ALPHA_VERITY_SIG</code></td><td>A serialized JSON object, see below</td><td>Contains a root hash and a PKCS#7 signature for it, permitting signed dm-verity GPT images.</td></tr><tr><td><em>Root Verity Signature Partition (ARC)</em></td><td><code>143a70ba-cbd3-4f06-919f-6c05683a78bc</code> <code>SD_GPT_ROOT_ARC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (32-bit ARM)</em></td><td><code>42b0455f-eb11-491d-98d3-56145ba9d037</code> <code>SD_GPT_ROOT_ARM_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (64-bit ARM/AArch64)</em></td><td><code>6db69de6-29f4-4758-a7a5-962190f00ce3</code> <code>SD_GPT_ROOT_ARM64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (Itanium/IA-64)</em></td><td><code>e98b36ee-32ba-4882-9b12-0ce14655f46a</code> <code>SD_GPT_ROOT_IA64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (LoongArch 64-bit)</em></td><td><code>5afb67eb-ecc8-4f85-ae8e-ac1e7c50e7d0</code> <code>SD_GPT_ROOT_LOONGARCH64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>c919cc1f-4456-4eff-918c-f75e94525ca5</code> <code>SD_GPT_ROOT_MIPS_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>904e58ef-5c65-4a31-9c57-6af5fc7c5de7</code> <code>SD_GPT_ROOT_MIPS64_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (HPPA/PARISC)</em></td><td><code>15de6170-65d3-431c-916e-b0dcd8393f25</code> <code>SD_GPT_ROOT_PARISC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (64-bit PowerPC LittleEndian)</em></td><td><code>d4a236e7-e873-4c07-bf1d-bf6cf7f1c3c6</code> <code>SD_GPT_ROOT_PPC64_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (64-bit PowerPC BigEndian)</em></td><td><code>f5e2c20c-45b2-4ffa-bce9-2a60737e1aaf</code> <code>SD_GPT_ROOT_PPC64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (32-bit PowerPC)</em></td><td><code>1b31b5aa-add9-463a-b2ed-bd467fc857e7</code> <code>SD_GPT_ROOT_PPC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (RISC-V 32-bit)</em></td><td><code>3a112a75-8729-4380-b4cf-764d79934448</code> <code>SD_GPT_ROOT_RISCV32_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (RISC-V 64-bit)</em></td><td><code>efe0f087-ea8d-4469-821a-4c2a96a8386a</code> <code>SD_GPT_ROOT_RISCV64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (s390)</em></td><td><code>3482388e-4254-435a-a241-766a065f9960</code> <code>SD_GPT_ROOT_S390_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (s390x)</em></td><td><code>c80187a5-73a3-491a-901a-017c3fa953e9</code> <code>SD_GPT_ROOT_S390X_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (TILE-Gx)</em></td><td><code>b3671439-97b0-4a53-90f7-2d5a8f3ad47b</code> <code>SD_GPT_ROOT_TILEGX_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (amd64/x86_64)</em></td><td><code>41092b05-9fc8-4523-994f-2def0408b176</code> <code>SD_GPT_ROOT_X86_64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>Root Verity Signature Partition (x86)</em></td><td><code>5996fc05-109c-48de-808b-23fa0830b676</code> <code>SD_GPT_ROOT_X86_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (Alpha)</em></td><td><code>5c6e1c76-076a-457a-a0fe-f3b4cd21ce6e</code> <code>SD_GPT_USR_ALPHA_VERITY_SIG</code></td><td>A serialized JSON object, see below</td><td>Similar semantics to root Verity signature partition, but just for the <code>/usr/</code> partition.</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (ARC)</em></td><td><code>94f9a9a1-9971-427a-a400-50cb297f0f35</code> <code>SD_GPT_USR_ARC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (32-bit ARM)</em></td><td><code>d7ff812f-37d1-4902-a810-d76ba57b975a</code> <code>SD_GPT_USR_ARM_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (64-bit ARM/AArch64)</em></td><td><code>c23ce4ff-44bd-4b00-b2d4-b41b3419e02a</code> <code>SD_GPT_USR_ARM64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (Itanium/IA-64)</em></td><td><code>8de58bc2-2a43-460d-b14e-a76e4a17b47f</code> <code>SD_GPT_USR_IA64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (LoongArch 64-bit)</em></td><td><code>b024f315-d330-444c-8461-44bbde524e99</code> <code>SD_GPT_USR_LOONGARCH64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (32-bit MIPS LittleEndian (mipsel))</em></td><td><code>3e23ca0b-a4bc-4b4e-8087-5ab6a26aa8a9</code> <code>SD_GPT_USR_MIPS_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (64-bit MIPS LittleEndian (mips64el))</em></td><td><code>f2c2c7ee-adcc-4351-b5c6-ee9816b66e16</code> <code>SD_GPT_USR_MIPS64_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (HPPA/PARISC)</em></td><td><code>450dd7d1-3224-45ec-9cf2-a43a346d71ee</code> <code>SD_GPT_USR_PARISC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (64-bit PowerPC LittleEndian)</em></td><td><code>c8bfbd1e-268e-4521-8bba-bf314c399557</code> <code>SD_GPT_USR_PPC64_LE_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (64-bit PowerPC BigEndian)</em></td><td><code>0b888863-d7f8-4d9e-9766-239fce4d58af</code> <code>SD_GPT_USR_PPC64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (32-bit PowerPC)</em></td><td><code>7007891d-d371-4a80-86a4-5cb875b9302e</code> <code>SD_GPT_USR_PPC_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (RISC-V 32-bit)</em></td><td><code>c3836a13-3137-45ba-b583-b16c50fe5eb4</code> <code>SD_GPT_USR_RISCV32_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (RISC-V 64-bit)</em></td><td><code>d2f9000a-7a18-453f-b5cd-4d32f77a7b32</code> <code>SD_GPT_USR_RISCV64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (s390)</em></td><td><code>17440e4f-a8d0-467f-a46e-3912ae6ef2c5</code> <code>SD_GPT_USR_S390_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (s390x)</em></td><td><code>3f324816-667b-46ae-86ee-9b0c0c6c11b4</code> <code>SD_GPT_USR_S390X_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (TILE-Gx)</em></td><td><code>4ede75e2-6ccc-4cc8-b9c7-70334b087510</code> <code>SD_GPT_USR_TILEGX_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (amd64/x86_64)</em></td><td><code>e7bb33fb-06cf-4e81-8273-e543b413e2e2</code> <code>SD_GPT_USR_X86_64_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em><code>/usr/</code> Verity Signature Partition (x86)</em></td><td><code>974a71c0-de41-43c3-be5d-5c5ccd1ad2c0</code> <code>SD_GPT_USR_X86_VERITY_SIG</code></td><td>ditto</td><td>ditto</td></tr><tr><td><em>EFI System Partition</em></td><td><code>c12a7328-f81f-11d2-ba4b-00a0c93ec93b</code> <code>SD_GPT_ESP</code></td><td>VFAT</td><td>The ESP used for the current boot is automatically mounted to <code>/efi/</code> (or <code>/boot/</code> as fallback), unless a different partition is mounted there (possibly via <code>/etc/fstab</code>, or because the Extended Boot Loader Partition — see below — exists) or the directory is non-empty on the root disk. This partition type is defined by the
<a href=http://www.uefi.org/specifications>UEFI Specification</a>.</td></tr><tr><td><em>Extended Boot Loader Partition</em></td><td><code>bc13c2ff-59e6-4262-a352-b275fd6f7172</code> <code>SD_GPT_XBOOTLDR</code></td><td>Typically VFAT</td><td>The Extended Boot Loader Partition (XBOOTLDR) used for the current boot is automatically mounted to <code>/boot/</code>, unless a different partition is mounted there (possibly via <code>/etc/fstab</code>) or the directory is non-empty on the root disk. This partition type is defined by the
<a href=https://systemd.io/BOOT_LOADER_SPECIFICATION>Boot Loader Specification</a>.</td></tr><tr><td><em>Swap</em></td><td><code>0657fd6d-a4ab-43c4-84e5-0933c84b4f4f</code> <code>SD_GPT_SWAP</code></td><td>Swap, optionally in LUKS</td><td>All swap partitions on the disk containing the root partition are automatically enabled. If the partition is encrypted with LUKS, the device mapper file will be named <code>/dev/mapper/swap</code>. This partition type predates the Discoverable Partitions Specification.</td></tr><tr><td><em>Home Partition</em></td><td><code>933ac7e1-2eb4-4f13-b844-0e14e2aef915</code> <code>SD_GPT_HOME</code></td><td>Any native, optionally in LUKS</td><td>The first partition with this type UUID on the disk containing the root partition is automatically mounted to <code>/home/</code>. If the partition is encrypted with LUKS, the device mapper file will be named <code>/dev/mapper/home</code>.</td></tr><tr><td><em>Server Data Partition</em></td><td><code>3b8f8425-20e0-4f3b-907f-1a25a76f98e8</code> <code>SD_GPT_SRV</code></td><td>Any native, optionally in LUKS</td><td>The first partition with this type UUID on the disk containing the root partition is automatically mounted to <code>/srv/</code>. If the partition is encrypted with LUKS, the device mapper file will be named <code>/dev/mapper/srv</code>.</td></tr><tr><td><em>Variable Data Partition</em></td><td><code>4d21b016-b534-45c2-a9fb-5c16e091fd2d</code> <code>SD_GPT_VAR</code></td><td>Any native, optionally in LUKS</td><td>The first partition with this type UUID on the disk containing the root partition is automatically mounted to <code>/var/</code> — under the condition that its partition UUID matches the first 128 bits of <code>HMAC-SHA256(machine-id, 0x4d21b016b53445c2a9fb5c16e091fd2d)</code> (i.e. the SHA256 HMAC hash of the binary type UUID keyed by the machine ID as read from
<a href=https://www.freedesktop.org/software/systemd/man/machine-id.html><code>/etc/machine-id</code></a>. This special requirement is made because <code>/var/</code> (unlike the other partition types listed here) is inherently private to a specific installation and cannot possibly be shared between multiple OS installations on the same disk, and thus should be bound to a specific instance of the OS, identified by its machine ID. If the partition is encrypted with LUKS, the device mapper file will be named <code>/dev/mapper/var</code>.</td></tr><tr><td><em>Temporary Data Partition</em></td><td><code>7ec6f557-3bc5-4aca-b293-16ef5df639d1</code> <code>SD_GPT_TMP</code></td><td>Any native, optionally in LUKS</td><td>The first partition with this type UUID on the disk containing the root partition is automatically mounted to <code>/var/tmp/</code>. If the partition is encrypted with LUKS, the device mapper file will be named <code>/dev/mapper/tmp</code>. Note that the intended mount point is indeed <code>/var/tmp/</code>, not <code>/tmp/</code>. The latter is typically maintained in memory via <code>tmpfs</code> and does not require a partition on disk. In some cases it might be desirable to make <code>/tmp/</code> persistent too, in which case it is recommended to make it a symlink or bind mount to <code>/var/tmp/</code>, thus not requiring its own partition type UUID.</td></tr><tr><td><em>Per-user Home Partition</em></td><td><code>773f91ef-66d4-49b5-bd83-d683bf40ad16</code> <code>SD_GPT_USER_HOME</code></td><td>Any native, optionally in LUKS</td><td>A home partition of a user, managed by
<a href=https://www.freedesktop.org/software/systemd/man/systemd-homed.html><code>systemd-homed</code></a>.</td></tr><tr><td><em>Generic Linux Data Partition</em></td><td><code>0fc63daf-8483-4772-8e79-3d69d8477de4</code> <code>SD_GPT_LINUX_GENERIC</code></td><td>Any native, optionally in LUKS</td><td>No automatic mounting takes place for other Linux data partitions. This partition type should be used for all partitions that carry Linux file systems. The installer needs to mount them explicitly via entries in <code>/etc/fstab</code>. Optionally, these partitions may be encrypted with LUKS. This partition type predates the Discoverable Partitions Specification.</td></tr></tbody></table><p>Other GPT type IDs might be used on Linux, for example to mark software RAID or
LVM partitions. The definitions of those GPT types is outside of the scope of
this specification.</p><p><a href=https://www.freedesktop.org/software/systemd/man/systemd-id128.html>systemd-id128(1)</a>&rsquo;s
<code>show</code> command may be used to list those GPT partition type UUIDs.</p><h2 id=partition-names>Partition Names
<a class=anchor href=#partition-names>#</a></h2><p>For partitions of the types listed above it is recommended to use
human-friendly, descriptive partition names in the GPT partition table, for
example &ldquo;<em>Home</em>&rdquo;, &ldquo;<em>Server</em> <em>Data</em>&rdquo;, &ldquo;<em>Fedora</em> <em>Root</em>&rdquo; and similar, possibly
localized.</p><p>For the Root/Verity/Verity signature partitions it might make sense to use a
versioned naming scheme reflecting the OS name and its version,
e.g. &ldquo;fooOS_2021.4&rdquo; or similar.
For details about the version format see the
<a href=/specifications/specs/version_format_specification/>Version Format Specification</a>. The underscore
character (<code>_</code>) must be used to separate the version from the name of the image.</p><h2 id=partition-attribute-flags>Partition Attribute Flags
<a class=anchor href=#partition-attribute-flags>#</a></h2><p>This specification defines three GPT partition attribute flags that may be set
for the partition types defined above:</p><ol><li><p>For the root, <code>/usr/</code>, Verity, Verity signature, home, server data, variable
data, temporary data, swap, and extended boot loader partitions, the
partition flag bit 63 ("<em>no-auto</em>", <em>SD_GPT_FLAG_NO_AUTO</em>) may be used to
turn off auto-discovery for the specific partition. If set, the partition
will not be automatically mounted or enabled.</p></li><li><p>For the root, <code>/usr/</code>, Verity, Verity signature home, server data, variable
data, temporary data and extended boot loader partitions, the partition flag
bit 60 ("<em>read-only</em>", <em>SD_GPT_FLAG_READ_ONLY</em>) may be used to mark a
partition for read-only mounts only. If set, the partition will be mounted
read-only instead of read-write. Note that the variable data partition and
the temporary data partition will generally not be able to serve their
purpose if marked read-only, since by their very definition they are
supposed to be mutable. (The home and server data partitions are generally
assumed to be mutable as well, but the requirement for them is not equally
strong.) Because of that, while the read-only flag is defined and supported,
it&rsquo;s almost never a good idea to actually use it for these partitions. Also
note that Verity and signature partitions are by their semantics always
read-only. The flag is hence of little effect for them, and it is
recommended to set it unconditionally for the Verity and signature partition
types.</p></li><li><p>For the root, <code>/usr/</code>, home, server data, variable data, temporary data and
extended boot loader partitions, the partition flag bit 59
("<em>grow-file-system</em>", <em>SD_GPT_FLAG_GROWFS</em>) may be used to mark a partition
for automatic growing of the contained file system to the size of the
partition when mounted. Tools that automatically mount disk image with a GPT
partition table are suggested to implicitly grow the contained file system
to the partition size they are contained in, if they are found to be
smaller. This flag is without effect on partitions marked &ldquo;<em>read-only</em>&rdquo;.</p></li></ol><p>Note that the first two flag definitions happen to correspond nicely to the
same ones used by Microsoft Basic Data Partitions.</p><p>All three of these flags generally affect only auto-discovery and automatic
mounting of disk images. If partitions marked with these flags are mounted
using low-level commands like
<a href=https://man7.org/linux/man-pages/man2/mount.8.html>mount(8)</a> or directly with
<a href=https://man7.org/linux/man-pages/man2/mount.2.html>mount(2)</a>, they typically
have no effect.</p><h2 id=verity>Verity
<a class=anchor href=#verity>#</a></h2><p>The Root/<code>/usr/</code> partition types and their matching Verity and Verity signature
partitions enable relatively automatic handling of <code>dm-verity</code> protected
setups. These types are defined with two modes of operation in mind:</p><ol><li><p>A trusted Verity root hash is passed in externally, for example is specified
on the kernel command line that is signed along with the kernel image using
SecureBoot PE signing (which in turn is tested against a set of
firmware-provided set of signing keys). If so, discovery and setup of a
Verity volume may be fully automatic: if the root partition&rsquo;s UUID is chosen
to match the first 128 bit of the root hash, and the matching Verity
partition UUIDs is chosen to match the last 128bit of the root hash, then
automatic discovery and match-up of the two partitions is possible, as the
root hash is enough to both find the partitions and then combine them in a
Verity volume. In this mode a Verity signature partition is not used and
unnecessary.</p></li><li><p>A Verity signature partition is included on the disk, with a signature to be
tested against a system-provided set of signing keys. The signature
partition primarily contains two fields: the root hash to use, and a PKCS#7
signature of it, using a signature key trusted by the OS. If so, discovery
and setup of a Verity volume may be fully automatic. First, the specified
root hash is validated with the signature and the OS-provided trusted
keys. If the signature checks out the root hash is then used in the same way
as in the first mode of operation described above.</p></li></ol><p>Both modes of operation may be combined in a single image. This is particularly
useful for images that shall be usable in two different contexts: for example
an image that shall be able to boot directly on UEFI systems (in which
case it makes sense to include the root hash on the kernel command line that is
included in the signed kernel image to boot, as per mode of operation #1
above), but also be able to used as image for a container engine (such as
<code>systemd-nspawn</code>), which can use the signature partition to validate the image,
without making use of the signed kernel image (and thus following mode of
operation #2).</p><p>The Verity signature partition&rsquo;s contents should be a serialized JSON object in
text form, padded with NUL bytes to the next multiple of 4096 bytes in
size. Currently three fields are defined for the JSON object:</p><ol><li><p>The (mandatory) <code>rootHash</code> field should be a string containing the Verity root hash,
formatted as series of (lowercase) hex characters.</p></li><li><p>The (mandatory) <code>signature</code> field should be a string containing the PKCS#7
signature of the root hash, in Base64-encoded DER format. This should be the
same format used by the Linux kernel&rsquo;s dm-verity signature logic, i.e. the
signed data should be the exact string representation of the hash, as stored
in <code>rootHash</code> above.</p></li><li><p>The (optional) <code>certificateFingerprint</code> field should be a string containing
a SHA256 fingerprint of the X.509 certificate in DER format for the key that
signed the root hash, formatted as series of (lowercase) hex characters (no <code>:</code>
separators or such).</p></li></ol><p>More fields might be added in later revisions of this specification.</p><h2 id=suggested-mode-of-operation>Suggested Mode of Operation
<a class=anchor href=#suggested-mode-of-operation>#</a></h2><p>An <em>installer</em> that repartitions the hard disk <em>should</em> use the above UUID
partition types for appropriate partitions it creates.</p><p>An <em>installer</em> which supports a &ldquo;manual partitioning&rdquo; interface <em>may</em> choose to
pre-populate the interface with swap, <code>/home/</code>, <code>/srv/</code>, <code>/var/tmp/</code> partitions
of pre-existing Linux installations, identified with the GPT type UUIDs
above. The installer should not pre-populate such an interface with any
identified root, <code>/usr</code> or <code>/var/</code> partition unless the intention is to
overwrite an existing operating system that might be installed.</p><p>An <em>installer</em> <em>may</em> omit creating entries in <code>/etc/fstab</code> for root, <code>/home/</code>,
<code>/srv/</code>, <code>/var/</code>, <code>/var/tmp</code> and for the swap partitions if they use these UUID
partition types, and are the first partitions on the disk of each type. If the
ESP shall be mounted to <code>/efi/</code> (or <code>/boot/</code>), it may additionally omit
creating the entry for it in <code>/etc/fstab</code>. If the EFI partition shall not be
mounted to <code>/efi/</code> or <code>/boot/</code>, it <em>must</em> create <code>/etc/fstab</code> entries for them.
If other partitions are used (for example for <code>/usr/local/</code> or
<code>/var/lib/mysql/</code>), the installer <em>must</em> register these in <code>/etc/fstab</code>. The
<code>root=</code> parameter passed to the kernel by the boot loader may be omitted if the
root partition is the first one on the disk of its type. If the root partition
is not the first one on the disk, the <code>root=</code> parameter <em>must</em> be passed to the
kernel by the boot loader. An installer that mounts a root, <code>/usr/</code>, <code>/home/</code>,
<code>/srv/</code>, <code>/var/</code>, or <code>/var/tmp/</code> file system with the partition types defined
as above which contains a LUKS header <em>must</em> call the device mapper device
&ldquo;root&rdquo;, &ldquo;usr&rdquo;, &ldquo;home&rdquo;, &ldquo;srv&rdquo;, &ldquo;var&rdquo; or &ldquo;tmp&rdquo;, respectively. This is necessary
to ensure that the automatic discovery will never result in different device
mapper names than any static configuration by the installer, thus eliminating
possible naming conflicts and ambiguities.</p><p>An <em>operating</em> <em>system</em> <em>should</em> automatically discover and mount the first
root partition that does not have the no-auto flag set (as described above) by
scanning the disk containing the currently used EFI ESP. It <em>should</em>
automatically discover and mount the first <code>/usr/</code>, <code>/home/</code>, <code>/srv/</code>, <code>/var/</code>,
<code>/var/tmp/</code> and swap partitions that do not have the no-auto flag set by
scanning the disk containing the discovered root partition. It should
automatically discover and mount the partition containing the currently used
EFI ESP to <code>/efi/</code> (or <code>/boot/</code> as fallback). It should automatically discover
and mount the partition containing the currently used Extended Boot Loader
Partition to <code>/boot/</code>. It <em>should not</em> discover or automatically mount
partitions with other UUID partition types, or partitions located on other
disks, or partitions with the no-auto flag set. User configuration shall
always override automatic discovery and mounting. If a root, <code>/usr/</code>,
<code>/home/</code>, <code>/srv/</code>, <code>/boot/</code>, <code>/var/</code>, <code>/var/tmp/</code>, <code>/efi/</code>, <code>/boot/</code> or swap
partition is listed in <code>/etc/fstab</code> or with <code>root=</code> on the kernel command line,
it <em>must</em> take precedence over automatically discovered partitions. If a
<code>/home/</code>, <code>/usr/</code>, <code>/srv/</code>, <code>/boot/</code>, <code>/var/</code>, <code>/var/tmp/</code>, <code>/efi/</code> or <code>/boot/</code>
directory is found to be populated already in the root partition, the automatic
discovery <em>must not</em> mount any discovered file system over it. Optionally, in
case of the root, <code>/usr/</code> and their Verity partitions instead of strictly
mounting the first suitable partition an OS might choose to mount the partition
whose label compares the highest according to <code>strverscmp()</code> or similar logic,
in order to implement a simple partition-based A/B versioning scheme. The
precise rules are left for the implementation to decide, but when in doubt
earlier partitions (by their index) should always win over later partitions if
the label comparison is inconclusive.</p><p>A <em>container</em> <em>manager</em> should automatically discover and mount the root,
<code>/usr/</code>, <code>/home/</code>, <code>/srv/</code>, <code>/var/</code>, <code>/var/tmp/</code> partitions inside a container
disk image. It may choose to mount any discovered ESP and/or XBOOTLDR
partition to <code>/efi/</code> or <code>/boot/</code>. It should ignore any swap should they be
included in a container disk image.</p><p>If a btrfs file system is automatically discovered and mounted by the operating
system/container manager it will be mounted with its <em>default</em> subvolume. The
installer should make sure to set the default subvolume correctly using &ldquo;btrfs
subvolume set-default&rdquo;.</p><h2 id=sharing-of-file-systems-between-installations>Sharing of File Systems between Installations
<a class=anchor href=#sharing-of-file-systems-between-installations>#</a></h2><p>If two Linux-based operating systems are installed on the same disk, the scheme
above suggests that they may share the swap, <code>/home/</code>, <code>/srv/</code>, <code>/var/tmp/</code>,
ESP, XBOOTLDR. However, they should each have their own root, <code>/usr/</code> and
<code>/var/</code> partition.</p><h2 id=frequently-asked-questions>Frequently Asked Questions
<a class=anchor href=#frequently-asked-questions>#</a></h2><h3 id=why-are-you-taking-my-etcfstab-away>Why are you taking my <code>/etc/fstab</code> away?
<a class=anchor href=#why-are-you-taking-my-etcfstab-away>#</a></h3><p>We are not. <code>/etc/fstab</code> always overrides automatic discovery and is indeed
mentioned in the specifications. We are simply trying to make the boot and
installation processes of Linux a bit more robust and self-descriptive.</p><h3 id=why-did-you-only-define-the-root-partition-for-these-listed-architectures>Why did you only define the root partition for these listed architectures?
<a class=anchor href=#why-did-you-only-define-the-root-partition-for-these-listed-architectures>#</a></h3><p>Please submit a patch that adds appropriate partition type UUIDs for the
architecture of your choice should they be missing so far. The only reason they
aren&rsquo;t defined yet is that nobody submitted them yet.</p><h3 id=why-define-distinct-root-partition-uuids-for-the-various-architectures>Why define distinct root partition UUIDs for the various architectures?
<a class=anchor href=#why-define-distinct-root-partition-uuids-for-the-various-architectures>#</a></h3><p>This allows disk images that may be booted on multiple architectures to use
discovery of the appropriate root partition on each architecture.</p><h3 id=doesnt-this-break-multi-boot-scenarios>Doesn&rsquo;t this break multi-boot scenarios?
<a class=anchor href=#doesnt-this-break-multi-boot-scenarios>#</a></h3><p>No, it doesn&rsquo;t. The specification says that installers may not stop creating
<code>/etc/fstab</code> or stop including <code>root=</code> on the kernel command line, unless the used
partitions are the first ones of their type on the disk. Additionally,
<code>/etc/fstab</code> and <code>root=</code> both override automatic discovery. Multi-boot is hence
well supported, since it doesn&rsquo;t change anything for anything but the first
installation.</p><p>That all said, it&rsquo;s not expected that generic installers generally stop setting
<code>root=</code> and creating <code>/etc/fstab</code> anyway. The option to drop these configuration
bits is primarily something for appliance-like devices. However, generic
installers should <em>still</em> set the right GPT partition types for the partitions
they create so that container managers, partition tools and administrators can
benefit. Phrased differently, this specification introduces A) the
<em>recommendation</em> to use the newly defined partition types to tag things
properly and B) the <em>option</em> to then drop <code>root=</code> and <code>/etc/fstab</code>. While we
advertise A) to <em>all</em> installers, we only propose B) for simpler,
appliance-like installations.</p><h3 id=what-partitioning-tools-will-create-a-dps-compliant-partition-table>What partitioning tools will create a DPS-compliant partition table?
<a class=anchor href=#what-partitioning-tools-will-create-a-dps-compliant-partition-table>#</a></h3><p>As of util-linux 2.25.2, the <code>fdisk</code> tool provides type codes to create the
root, home, and swap partitions that the DPS expects. By default, <code>fdisk</code> will
create an old-style MBR, not a GPT, so typing <code>l</code> to list partition types will
not show the choices to let you set the correct UUID. Make sure to first create
an empty GPT, then type <code>l</code> in order for the DPS-compliant type codes to be
available.</p><p>The <code>gdisk</code> tool (from version 1.0.5 onward) and its variants (<code>sgdisk</code>,
<code>cgdisk</code>) also support creation of partitions with a matching type code.</p><h2 id=links>Links
<a class=anchor href=#links>#</a></h2><p><a href=/specifications/specs/boot_loader_specification/>Boot Loader Specification</a><br><a href=https://systemd.io/BOOT_LOADER_INTERFACE>Boot Loader Interface</a><br><a href=https://systemd.io/BUILDING_IMAGES>Safely Building Images</a><br><a href=https://www.freedesktop.org/software/systemd/man/systemd-boot.html><code>systemd-boot(7)</code></a><br><a href=https://www.freedesktop.org/software/systemd/man/bootctl.html><code>bootctl(1)</code></a><br><a href=https://www.freedesktop.org/software/systemd/man/systemd-gpt-auto-generator.html><code>systemd-gpt-auto-generator(8)</code></a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/uapi-group/specifications/edit/main/specs/discoverable_partitions_specification.md target=_blank rel=noopener><img src=/specifications/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#defined-partition-type-uuids>Defined Partition Type UUIDs</a></li><li><a href=#partition-names>Partition Names</a></li><li><a href=#partition-attribute-flags>Partition Attribute Flags</a></li><li><a href=#verity>Verity</a></li><li><a href=#suggested-mode-of-operation>Suggested Mode of Operation</a></li><li><a href=#sharing-of-file-systems-between-installations>Sharing of File Systems between Installations</a></li><li><a href=#frequently-asked-questions>Frequently Asked Questions</a><ul><li><a href=#why-are-you-taking-my-etcfstab-away>Why are you taking my <code>/etc/fstab</code> away?</a></li><li><a href=#why-did-you-only-define-the-root-partition-for-these-listed-architectures>Why did you only define the root partition for these listed architectures?</a></li><li><a href=#why-define-distinct-root-partition-uuids-for-the-various-architectures>Why define distinct root partition UUIDs for the various architectures?</a></li><li><a href=#doesnt-this-break-multi-boot-scenarios>Doesn&rsquo;t this break multi-boot scenarios?</a></li><li><a href=#what-partitioning-tools-will-create-a-dps-compliant-partition-table>What partitioning tools will create a DPS-compliant partition table?</a></li></ul></li><li><a href=#links>Links</a></li></ul></nav></div></aside></main></body></html>